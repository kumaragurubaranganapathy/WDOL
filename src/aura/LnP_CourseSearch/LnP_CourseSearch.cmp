<!-- 
*************************************************************************
Component Name : LnP_CourseSearch
Created By : Kojashree Kakariya
Creation Date : 17-May-2019

Modification Log
Name			Date			Issue
_______________________________________________________________
*******************************************************************************-->
<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes" access="global" controller="Polaris_DynamicSQL" >
    <aura:attribute name="screenOne" type="Boolean" default="true"/>
    <aura:attribute name="screenTwo" type="Boolean" default="false"/> 
    <aura:attribute name="prgmLicMap" type="Map" />

   <aura:attribute name="screenThree" type="Boolean" default="false"/> 
    <aura:attribute name="picklistList" type="List" default="[{'objectApi':'MUSW__License2__c', 'fieldsName':'Course_Type__c', 'auraAttr':'v.courseTypeOptions'},
                                                              {'objectApi':'MUSW__License2__c', 'fieldsName':'Course_Topic__c', 'auraAttr':'v.courseTopicOptions'},
                                                              {'objectApi':'MUSW__License2__c', 'fieldsName':'Course_Status__c', 'auraAttr':'v.courseStatusOptions'},
                                                              {'objectApi':'MUSW__License2__c', 'fieldsName':'Delivery_Method__c', 'auraAttr':'v.deliveryMethodOptions'}]" />
	
    <aura:attribute name="programOptions" type="List" />
    <aura:attribute name="courseTypeOptions" type="List" />
    <aura:attribute name="licensureLevelOptions" type="List" />
    <aura:attribute name="courseTopicOptions" type="List" />
    <aura:attribute name="courseStatusOptions" type="List" />
    <aura:attribute name="deliveryMethodOptions" type="List" />
    <aura:attribute name="optionName" type="Object[]" />
    
    <!--for datatable-->
    <aura:attribute name="data" type="Object"/>
    <aura:attribute name="columns" type="List"/>
    <aura:attribute name="errors" type="Object" default="[]"/>
    
    <aura:attribute name="searchOne" type="Boolean" default="false"/>
    <aura:attribute name="searchTwo" type="Boolean" default="false"/>
	<aura:attribute name="searchThree" type="Boolean" default="false"/>
    <aura:attribute name="disableLicenseType" type="Boolean" default="true"/>
    
    <aura:attribute name="licenseId" type="String" />
    <aura:attribute name="detailData" type="List" />
    <aura:attribute name="showSearchFields" type="Boolean" default="false"/>
    
    <aura:attribute name="searchOneArray" type="List"/>
    <aura:attribute name="searchTwoArray" type="List"/>
    
    <aura:attribute name="date" type="String"/>
    <aura:attribute name="sortBy" type="String"/>
    <aura:attribute name="sortDirection" type="String"/>
    
    <aura:attribute name="applicationFilt" type="List"/>
    <aura:attribute name="dispList" type="List" />
    <aura:attribute name="optionsExist" type="Boolean" default="false" />
   
    <aura:attribute name="licenseNameToDisplay" type="String" default="License" />
    <aura:attribute name="courseNameToDisplayDetails" type="String" default="License" />
    <aura:attribute name="licenseRecordType" type="String"/>
    <aura:attribute name="CourseRecordTypeId" type="String"/>
    
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    
    <div class="page-width">
    	
        	<div class="slds-page-header">
                <h1>Education</h1>
            </div>
        <aura:if isTrue="{!or(v.screenTwo, v.screenThree)}">
            <lightning:breadcrumbs class="slds-p-vertical_x-small">
                <lightning:breadcrumb class="transform-text breadcumb" label="Education" href="javascrit:void(0)" onclick="{!c.navigateToCustomPlace1}"/>
                <lightning:breadcrumb class="transform-text breadcumb" label="Course Search Results" href="javascrit:void(0)" onclick="{!c.navigateToCustomPlace2}"/>
                <aura:if isTrue="{!v.screenThree}">
                    <lightning:breadcrumb class="transform-text breadcumb" label="Course Details" href="javascrit:void(0)" onclick="{!c.navigateToCustomPlace3}"/>
                </aura:if>
            </lightning:breadcrumbs>
        </aura:if>
        <div class="screen-one" id="screenOneStyles" >
            
                                          
            <aura:if isTrue="{!v.screenOne}">
                <div class="section-header slds-m-top_xx-large slds-m-horizontal_medium">
                    Search a Course
                </div>
                
                       
            <div class="slds-box slds-m-top_medium slds-m-horizontal_medium">
                <div class="slds-form-element">
                    <div class="slds-grid">
                        <aura:if isTrue="{!v.optionsExist}">
                        <div class="slds-col slds-size_1-of-3 slds-p-vertical_large slds-p-horizontal_xx-large">
      					
           	              <lightning:select name="Program" label="What program are you interested in?" aura:id="Program" value="" required="true" onchange="{!c.searchCourse}" >
                                <option text="Select an Option" value=""/>
                                <aura:iteration items="{!v.programOptions}" var="option">
                                    <option text="{!option}" value="{!option}" label="{!option}" />
                                </aura:iteration>
                            </lightning:select> 
                        </div>
                        </aura:if>
                         <div class="slds-col slds-size_1-of-3 slds-p-vertical_large slds-p-horizontal_xx-large">
                             <span class="slds-form-element__label">Course Type: </span>   <!-- <lightning:inputField  label="Course Type" fieldName="Course_Type__c" value="" onchange="{!c.searchCourse}" /> -->
                             <c:LnP_Multiselect_Picklist options="{!v.courseTypeOptions}" aura:id="CourseType"  />
                        </div>
                        
                         <div class="slds-col slds-size_1-of-3 slds-p-vertical_large slds-p-horizontal_xx-large">
  
                         <lightning:select name="licensureLevel" label="What licensure level?" aura:id="licensureLevel" value="" disabled="{!v.disableLicenseType}">
                                <option text="Select an Option" value=""/>
                                <aura:iteration items="{!v.licensureLevelOptions}" var="option">
                                    <option text="{!option}" label="{!option}" value="{!option}"/>
                                </aura:iteration>
                            </lightning:select> 
                        </div>
                        
                    </div>
                     <!-- Start of form -->
                   <div class="slds-form-element">
                      
                      <aura:if isTrue="{!v.showSearchFields}">
                    <div class="slds-grid">
                         <div class="slds-col slds-size_1-of-4 slds-p-vertical_large slds-p-horizontal_xx-large">
                     <!--   Provider/School Name: -->
                        <lightning:input aura:id="schoolName" label="Provider/School Name" placeholder="Enter Name" name="schoolName" type="text"/>
                                         
                        </div>
                         <div class="slds-col slds-size_1-of-4 slds-p-vertical_large slds-p-horizontal_xx-large">
                      <!--  Course Name:-->
                        <lightning:input aura:id="courseName" label="Course Name" placeholder="Enter Course Name" name="courseName" type="text" />
                                          
                        </div>
                         <div class="slds-col slds-size_1-of-4 slds-p-vertical_large slds-p-horizontal_xx-large">
                       <!-- Course Number: -->
                        <lightning:input aura:id="courseNumber" label="Course Number" placeholder="Enter Course Number" name="courseNumber" type="text"/> 
                                                       
                        </div>
                        
                    </div>
                    
                    <div class="slds-grid ">
                        <div class="slds-col slds-size_1-of-4 slds-p-vertical_large slds-p-horizontal_xx-large">
                           <!-- Clock Hours: -->
                            <lightning:input aura:id="clockHours" label="Clock Hours" placeholder="Enter Clock Hours" name="clockHours"/>
                                              
                        </div>
                         <div class="slds-col slds-size_1-of-4 slds-p-vertical_large slds-p-horizontal_xx-large">
                            <span class="slds-form-element__label">Topic: </span> 
                         <!--   <lightning:inputField  class="slds-m-vertical_large" label="Topic" fieldName="Course_Topic__c" /> -->
                        <c:LnP_Multiselect_Picklist options="{!v.courseTopicOptions}" aura:id="Topic"/>
                        </div>
                        <div class="slds-col slds-size_1-of-4 slds-p-vertical_large slds-p-horizontal_xx-large">
                        <span class="slds-form-element__label" for="Status">Status: </span>   
                                 <lightning:input aura:id="Status" label="Status" variant="label-hidden" fieldName="Course_Status__c" /> 
                         <!--   <lightning:select name="Status" label="Status" aura:id="Status" value="">
                                <option text="Select an Option" value=""/>
                                <aura:iteration items="{!v.courseStatusOptions}" var="option">
                                    <option text="{!option}" value="{!option}"/>
                                </aura:iteration>
                            </lightning:select> -->
                        </div>
                        <div class="slds-col slds-size_1-of-4 slds-p-vertical_large slds-p-horizontal_xx-large">
                        <span class="slds-form-element__label">Delivery Method: </span> 
                          <lightning:input aura:id="DeliveryMethod" label="Delivery Method" variant="label-hidden" fieldName="Delivery_Method__c" /> 
                      <!-- <lightning:select name="DeliveryMethod" label="Delivery Method" aura:id="DeliveryMethod" value="">
                                <option text="Select an Option" value=""/>
                                <aura:iteration items="{!v.deliveryMethodOptions}" var="option">
                                    <option text="{!option}" value="{!option}"/>
                                </aura:iteration>
                            </lightning:select> -->
                        </div>
                        
                    </div>
                        
                 </aura:if>
                    </div>
                </div>   
            </div>
          
            <div class="slds-grid slds-float_right slds-p-around_medium">
                <lightning:button variant="neutral" type="button" name="cancel" label="Cancel" onclick="{!c.cancelSearchWithNum}"/>
                <lightning:button variant="brand" type="submit" name="Search" label="Search"  onclick="{!c.fetchCourseDetails}"/>
            </div>
            </aura:if>
                 
        </div>
       <div class="screen-two">
            <aura:if isTrue="{!v.screenTwo}">
                <div class="slds-m-bottom_xx-large">
                    <span class="sub-header">Course Search Criteria</span>
                    <span>
                        <lightning:button variant="neutral" class="button-border" type="button" name="cancel" label="Modify Search" onclick="{!c.modifySearch}"/>
                    </span>
                </div>
                  <div class="search-details slds-m-top_large slds-m-bottom_xx-large">
                	<aura:if isTrue="{!v.searchOne}">
                    	<aura:iteration items="{!v.searchOneArray}" var="option">
                            <div class="slds-col slds-size_1-of-2 slds-form-element_horizontal slds-form-element">
                                <div class="slds-form-element__label">{!option.label}</div>
                                <div class="slds-form-element__control">:{!option.value}</div>
                            </div>
                        </aura:iteration>
                    </aura:if>
                    <aura:if isTrue="{!v.searchTwo}">
                    	<aura:iteration items="{!v.searchTwoArray}" var="option">
                            <div class="slds-col slds-size_1-of-2 slds-form-element_horizontal slds-form-element">
                                <div class="slds-form-element__label">{!option.label}</div>
                                <div class="slds-form-element__control">:{!option.value}</div>
                            </div>
                        </aura:iteration>
                    </aura:if>
                    <aura:if isTrue="{!v.searchThree}">
                    	
                    </aura:if>
                </div>
                <div class="slds-m-bottom_medium">
                    <span class="sub-header"><b>Search Results</b></span>
                    <span class="buttons-right text-style text-size">Click on any row below for more information</span> <br/>
                    <span> T = Trainee L = State Licensed R = Certified Residential G = Certified General</span>
                </div>
                 <lightning:datatable
                    class="button-borders"                 
                    columns="{!v.columns}"
                    data="{!v.data}"
                    keyField="id"
                    errors="{!v.errors}"
                    hideCheckboxColumn="true"
                    sortedBy="{!v.sortBy}"
                    sortedDirection="{!v.sortDirection}"
                    onsort="{!c.handleSort}"
                    onrowaction="{!c.handleRowAction}"
                    resizeColumnDisabled="true"/>
                   
                <div class="slds-m-vertical_xx-large pagination-wrapper">
                    <c:LnP_Pagination fullList="{!v.applicationFilt}" dispList="{!v.dispList}"/>
                </div>
           </aura:if> 
        </div> 
        <div class="screen-three">
        	<aura:if isTrue="{!v.screenThree}">
                <div class="slds-m-vertical_medium">
                    <span>{!v.courseNameToDisplayDetails}</span>
                </div>
                <div class="buttons-left text-style">
                         <span> T = Trainee L = State Licensed R = Certified Residential G = Certified General</span>
             </div>
                <div class="buttons-right text-style text-size">
                	<span>Information as of </span><span>{!v.date}</span>
                </div>
                 <aura:iteration items="{!v.detailData}" var="item">
                    <div class="card table-border">
                        <div class="slds-grid slds-p-around_small bottom-border">            
                            <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element row-margin">
                                <div class="slds-form-element__label text-style">Course Name</div>
                                <div class="slds-form-element__control">: {!item.Course_Name__c}</div>
                            </div>
                            <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element row-margin">
                                <div class="slds-form-element__label text-style">Provider/School Name</div>
                                <div class="slds-form-element__control">: {!item.Provider_School_Name__c}</div>
                            </div>
                            <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element row-margin">
                                <div class="slds-form-element__label text-style">Status</div>
                                <div class="slds-form-element__control">: {!item.Course_Status__c}</div>
                            </div>
                        </div>
                      
                            <div class="slds-grid slds-p-around_small slds-wrap">
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">Course Name</div>
                                    <div class="slds-form-element__control">: {!item.Course_Name__c}</div>
                                </div>
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">Clock Hours</div>
                                    <div class="slds-form-element__control">: {!item.Clock_Hours__c}</div>
                                </div>
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">First Issue Date</div>
                                    <div class="slds-form-element__control">: {!item.Original_Issue_Date__c}</div>
                                </div>
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">Course Type</div>
                                    <div class="slds-form-element__control">: {!item.Course_Type__c}</div>
                                </div>
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">Pre-Qualifying</div>
                                    <div class="slds-form-element__control">: {!item.Clock_Hours_Pre_Qualifying__c}</div>
                                </div>
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">Current Issue Date</div>
                                    <div class="slds-form-element__control">: {!item.MUSW__Issue_Date__c}</div>
                                </div>
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">Licensure Level</div>
                                    <div class="slds-form-element__control">: {!item.Credential_Type__c}</div>
                                </div>
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">Qualifying Elective</div>
                                    <div class="slds-form-element__control">: {!item.Clock_Hours_Qualifying_Elective__c}</div>
                                </div>
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">Expiration Date</div>
                                    <div class="slds-form-element__control">: {!item.MUSW__Expiration_Date__c}</div>
                                </div>
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">Delivery Method</div>
                                    <div class="slds-form-element__control">: {!item.Delivery_Method__c}</div>
                                </div>
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">Continuing Education</div>
                                    <div class="slds-form-element__control">: {!item.Clock_Hours_Continuing_Education__c}</div>
                                </div>
                            </div>
                           <div class="">
                                <div class="section-name bottom-border slds-p-bottom_x-small slds-m-horizontal_small">Course Provider Contact</div>
                                <div class="section-content slds-p-around_small">
                                    <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                        <div class="slds-form-element__label text-style">Phone Number</div>
                                        <div class="slds-form-element__control">: {!item.Phone__c}</div>
                                    </div>
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">Email</div>
                                    <div class="slds-form-element__control">: {!item.Business_Email__c}</div>
                                </div>
                                <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                                    <div class="slds-form-element__label text-style">Website</div>
                                    <div class="slds-form-element__control">:</div>
                                </div>
                                </div>
                            </div>
                        <div class="">
                                <div class="section-name bottom-border slds-m-top_medium slds-p-bottom_x-small slds-m-horizontal_small">Event Information</div>
                                <div class="section-content slds-p-around_small">
                                    <table class="slds-table">
                                        <thead class="">
                                            <tr class="slds-line-height_reset">
                                                <th class="" scope="col">
                                                    <div class="slds-truncate text-size">Event Date</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate text-size">Event City</div>
                                                </th>
                                                <th class="" scope="col">
                                                    <div class="slds-truncate text-size">Event State</div>
                                                </th>
                                                
                                            </tr>
                                        </thead>
                                        <tbody>
                                          
                                                <tr class="slds-hint-parent">
                                                   
                                                    <td data-label="Event Date">
                                                        <div class="slds-truncate">: {!item.Event_Date__c}</div>
                                                    </td>
                                                    
                                                    <td data-label="City">
                                                        <div class="slds-truncate">: {!item.Event_City__c}</div>
                                                    </td>
                                                    
                                                    <td data-label="Event State">
                                                        <div class="slds-truncate">: {!item.Event_State__c}</div>
                                                    </td>
                                                </tr>
                                           
                                        </tbody>
                                    </table>                                
                                </div>
                            </div>
                    	
                        
                      
                    </div>
                </aura:iteration>
                <div class="buttons-right slds-m-vertical_small slds-m-left_small">
                	<lightning:button variant="neutral" class="color-white color-black text-size" type="button" name="cancel" label="SEARCH ANOTHER LICENSE" onclick="{!c.modifySearch}"/>
                </div>
            </aura:if> 
        </div>
    </div>
</aura:component>