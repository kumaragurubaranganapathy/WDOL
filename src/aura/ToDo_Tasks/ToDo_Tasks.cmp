<!-- *************************************************************************
Component Name : ToDo_Tasks
Created By : Chaitanya B
Creation Date : 29-May-2019

Modification Log
Name			Date			Issue
_______________________________________________________________
*******************************************************************************-->
<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes" access="global" controller="Polaris_TodoList">
    <aura:attribute name="taskList" type="List" description="Holds the lists of task for the user"/>
    <aura:attribute name ="taskRecordForModel" type ="Object" />
    <aura:attribute name="taskId" type="string" />
    <aura:attribute name="actionclicked" type="string" />
    <aura:attribute name="contactName" type="String" />
    <aura:attribute name="board" type="String" />
    <aura:attribute name="ServiceRequestType" type="String" />
    <aura:attribute name="licenseType" type="String" />
    <aura:attribute name="applicationType" type="String" />
    <aura:attribute name="requestId" type="String" />
    <aura:attribute name="accountContact" type="String" />
    <aura:attribute name="popupHeader" type="string" default="" description="On submit success popup header"/> 
    <aura:attribute name="popupBody" type="string" default="" description="On submit success popup body"/>
    <aura:attribute name="isOpen" type="boolean" default="false" description="Hide or Show popup boolean"/>
    <aura:attribute name="isOpenExam" type="boolean" default="false" description="Hide or Show popup boolean"/>
    <aura:attribute name="serverStatus" type="string" default=""/>
    <aura:attribute name ="portalURL" type ="String" default = "{!$Label.c.Polaris_Portal_Home}"/>
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:attribute name ="hasSecurityCode" type = "Boolean" default = "false" ></aura:attribute>
    <aura:attribute name ="doesNotHaveSecurityCode" type = "Boolean" default = "false" ></aura:attribute>
    <aura:attribute name="licenseTypeList" type="List" description="Holds the lists of licenseType"/>
    <aura:attribute name="licenseColumnList" type="List" description="Holds the lists of licenseType"/>
    <aura:attribute name="accountColumnList" type="List" description="Holds the lists ofaccount"/>
    <aura:attribute name="accountColumnListData" type="List" description="Holds the lists ofaccount"/>
    <aura:attribute name="LicenseColumnListData" type="List" description="Holds the lists of accounts"/>
    
    
    <div class="todo-wrapper">
        
        <div class="intro-section">
            <!--<div class="intro-wrapper slds-wrap">
                
                    <div class="user-name">
                        {!'Hi ' + v.contactName + ' !'}
                    </div>                    
                
                <lightning:layoutItem size="12" mediumDeviceSize="3" class="apply-section">
                    
                    <lightning:button variant="brand" class="apply-btn" onclick="{! c.handleClick }" label="APPLY FOR NEW LICENSE" />
                    
                </lightning:layoutItem> 
            </div> -->
            <lightning:layout class="intro-wrapper slds-wrap">
                <lightning:layoutItem size="12" mediumDeviceSize="12" class="new-wrapper services">
                    <div class="ser-title">
                        Have an existing License?
                    </div>
                    <div class="ser-desc">
                        Manage your license by linking it to your POLARIS profile.
                    </div>
                    <div class="ser-btn-wrapper slds-m-bottom_large">
                        <lightning:button class="ser-btn pro-license" onclick="{!c.linkProfLic}" label="LINK YOUR PROFESSIONAL LICENSE" /> 
                    </div>
                    <div class="ser-btn-wrapper">
                        <lightning:button class="ser-btn pro-license" onclick="{!c.linkBizLic}" label="LINK YOUR BUSINESS" />  
                    </div>
                </lightning:layoutItem>
                <!--<lightning:layoutItem aura:id ="professionalForm" padding="around-large" size="12" class="slds-hide new-wrapper slds-m-left_medium">
                    <div class="ser-title">
                        Link Your Professional License
                    </div>
                    <div class="">
                        <a href="javascript:void(0)" class="license-link" onclick ="{!c.showSecurityCode}">I have a Security</a>
                        |
                        <a href ="javascript:void(0)"  class ="license-link" onclick ="{!c.hideSecurityCode}">I Don't Have a Security Token</a>
                    </div>
                    <div>
                        <aura:if isTrue="{!v.hasSecurityCode}">
                            <lightning:input aura:id="securityTokenId" label="Security Token"
                                             name="securityToken"
                                             value=""
                                             required="true"/> 
                            
                        </aura:if>
                        <aura:if isTrue = "{!v.doesNotHaveSecurityCode}">
                            <div class="link-help">
                                Search your professional license using the details below and link it to your account
                            </div>
                            <div class="token-wrapper">
                                
                                <lightning:select aura:id="securityToken" name="licenseType" label="License Type" variant="Brand"  class="">
                                    <option value="" text=""/>    
                                    <aura:iteration items="{!v.licenseTypeList}" var="licenseType">
                                        <option value="{!licenseType}">{!licenseType}</option>
                                    </aura:iteration>
                                </lightning:select>
                                <lightning:input aura:id="securityToken" label="License"
                                                 name="license"
                                                 value=""
                                                 required="true"/>
                                <lightning:input aura:id="securityToken" label="First Name"
                                                 name="FirstName"
                                                 value=""
                                                 required="true"/>
                                <lightning:input aura:id="securityToken" label="Last Name"
                                                 name="lastName"
                                                 value=""
                                                 required="true"/>
                                
                                
                                <lightning:input type ="Date" aura:id="securityToken" label="Date of Birth"
                                                 name="DOB"
                                                 value=""
                                                 required="true"/>
                                <lightning:input aura:id="securityToken" label="Last 4 digits of your SSN"
                                                 name="ssn"
                                                 value=""
                                                 required="true"
                                                 maxlength ="4"/>
                            </div>
                        </aura:if>
                        <div id="buttonData" class ="slds-hide slds-float_right" style= "margin-top :20px">
                            <button class="slds-button slds-button_neutral" onclick="{!c.cancelBusiness}">Cancel</button>
                            <button class="slds-button slds-button_brand slds-m-left_small" onclick ="{!c.searchLicense}">Proceed</button>
                            
                        </div>
                    </div>
                </lightning:layoutItem>               
                <lightning:layoutItem aura:id ="businessForm" size="12" class="slds-hide new-wrapper">
                    <div class="ser-title link-title">
                        Link your Business License with an Activation Code
                    </div>
                    <p class="link-help">If you have received an activation code in an email from Department of Licensing, you can enter it here.</p>
                    <p class="link-help">If you would like to receive an activation code through email, please send your request with license number to loremipsum@domain.com</p>
                    <p class="link-help">If you would like to receive an activation code through phone call, please call on XXX.XXX.XXXX and provide your license number</p>
                    <div>
                        
                        <div class="token-wrapper">
                            <lightning:input aura:id="securityTokenBusiness" label="Activation Code"
                                             name="securityToken"
                                             value=""
                                             required="true"/> 
                            
                        </div>
                        
                        <div id="buttonDataBusiness" class ="slds-float_right" style= "margin-top :20px">
                            <button class="slds-button slds-button_neutral" onclick ="{!c.cancelBusiness}">Cancel</button>
                            <button class="slds-button slds-button_brand slds-m-left_small" onclick ="{!c.searchAccount}">Verify Code</button>
                            
                        </div>
                    </div>
                </lightning:layoutItem>               
            </lightning:layout>
            <lightning:layout class="slds-hide intro-wrapper" aura:id ="professionalLicenseDetails">
                <lightning:layoutItem padding="around-large" class="new-wrapper services slds-m-left_medium">
                    <div class="ser-title">
                        Link Your Professional License
                    </div>
                    <div style="height:300px" class="slds-p-vertical_small"> 
                        <div style="height: 100%; position: relative;">
                            <div class="slds-scrollable_x" style="height: 100%;">
                                <div class="slds-scrollable_y">
                                    <table class="slds-table slds-table_cell-buffer slds-max-medium-table_stacked slds-table_bordered">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <aura:iteration items="{!v.licenseColumnList}" var="headerData">
                                                    <th class="" scope="col">
                                                        <div class="slds-truncate header-style" title="{!headerData}">{!headerData}</div>
                                                    </th> 
                                                </aura:iteration>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.LicenseColumnListData}" var="tableData" indexVar="ind">
                                                <tr>
                                                    <td data-label="Name" class="cell-style">
                                                        <div class="slds-truncate">{!tableData.MUSW__Applicant__r.Name}</div>
                                                    </td>
                                                    <td data-label="UBI" class="cell-style">
                                                        <div class="slds-truncate">{!tableData.Name}</div>
                                                    </td>
                                                    <td data-label="UBI" class="cell-style">
                                                        <div class="slds-truncate">{!tableData.Credential_Type__c}</div>
                                                    </td>
                                                    <td data-label="UBI" class="cell-style">
                                                        <div class="slds-truncate">{!tableData.MUSW__Status__c}</div>
                                                    </td>
                                                    <td data-label="UBI" class="cell-style">
                                                        <div class="slds-truncate">{!tableData.Email__c}</div>
                                                    </td>  
                                                    'sfjdskg'{!tableData.MUSW__Applicant__c}
                                                    <td data-label="actions" data-index="{!ind}"  class="cell-style action-cell">
                                                        <a href= "javascript:void(0)" data-name="{!tableData.MUSW__Applicant__c}"  onclick= "{!c.linkLicenseToContact}">Link</a>
                                                    </td>
                                                </tr>
                                            </aura:iteration>    
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </lightning:layoutItem>    
                
            </lightning:layout>
            
            <lightning:layout aura:id ="business" class="slds-hide intro-wrapper">
                <lightning:layoutItem padding="around-large" size="12" class="new-wrapper services">
                    <div class="ser-title">
                        Link Your Business
                    </div>
                    <div class="">
                        Is this your business ? Click "Link" to proceed
                        If NOT go Back
                    </div>
                    <div style="height:300px" class="slds-p-vertical_small"> 
                        <div style="height: 100%; position: relative;">
                            <div class="slds-scrollable_x" style="height: 100%;">
                                <div class="slds-scrollable_y">
                                    <table class="slds-table slds-table_cell-buffer slds-max-medium-table_stacked slds-table_bordered">
                                        <thead>
                                            <tr class="slds-line-height_reset">
                                                <aura:iteration items="{!v.accountColumnList}" var="headerData">
                                                    <th class="" scope="col">
                                                        <div class="slds-truncate header-style" title="{!headerData}">{!headerData}</div>
                                                    </th> 
                                                </aura:iteration>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <aura:iteration items="{!v.accountColumnListData}" var="tableData" indexVar="ind">
                                                <tr>
                                                    <td data-label="Name" class="cell-style">
                                                        <div class="slds-truncate">{!tableData.Name}</div>
                                                    </td>
                                                    <td data-label="UBI" class="cell-style">
                                                        <div class="slds-truncate">{!tableData.UBI_Number__c}</div>
                                                    </td>
                                                    <td data-label="actions" data-index="{!ind}"  class="cell-style action-cell">
                                                        <a href= "javascript:void(0)" data-name="{!tableData.Id}"  onclick= "{!c.linkContactToAccount}">Link</a>
                                                    </td>
                                                </tr>
                                            </aura:iteration>    
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </lightning:layoutItem>  -->  
            </lightning:layout>
        </div> 
        
        <aura:if isTrue="{!not(empty(v.taskList))}">
            <div class="intro-text">
                {!v.taskList?'You have new tasks which need your attention':'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip.'}
            </div>
            <aura:iteration items="{!v.taskList}" var="task">
                <aura:if isTrue="{!task.Type == 'Contact Relationship'}">
                    <div class="task-wrapper">                    
                        <h1 class="task-subject"><b>{!task.Subject}</b></h1>                        
                        <lightning:layout class="slds-wrap task-body">
                            <lightning:layoutItem size="12" mediumDeviceSize="9">
                                <lightning:layout class="slds-wrap">
                                    <lightning:layoutItem size="12" mediumDeviceSize="4" class="field-style">
                                        <div class="label-style">Business Name: </div>
                                        <div class="data-style">{!task.Business_Name__c}</div>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="12" mediumDeviceSize="4" class="field-style">
                                        <div class="label-style">Designation: </div>
                                        <div class="data-style">{!task.Designation__c}</div>
                                    </lightning:layoutItem>
                                    <lightning:layoutItem size="12" mediumDeviceSize="4" class="field-style">
                                        <div class="label-style">Type: </div>
                                        <div class="data-style">{!task.Type}</div>
                                    </lightning:layoutItem>                                    
                                </lightning:layout>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="12" mediumDeviceSize="3" class="button-wrapper">                                    
                                <lightning:button class="{!or(task.Type == 'Renewal Reminder',task.Type == 'Payment Reminder')?'slds-hide':'decline-btn'}"  variant="neutral" type="submit" name="{!task.Id}" label="Decline" onclick="{!c.declineRequest}"/>
                                <div class="accept-btn" data-id="{!task.Id}" data-whatid="{!task.WhatId}" data-DCP="{!task.isDCP__c}" data-designation="{!task.Designation__c}" data-acctname="{!task.Main_License_Type__c}" onclick="{!c.acceptRequest}">
                                    <lightning:button variant="brand" type="submit" name="{!task.Id}" label="Accept" />
                                </div>
                                <lightning:button class="{!or(task.Type == 'License Verification',task.Type == 'Experience Verification')?'accept-btn':'slds-hide'}"  variant="brand" type="submit" name="{!task.Id}" label="Confirm" onclick="{!c.confirmRequest}"/>
                                <lightning:button class="{!(task.Type == 'Renewal Reminder')?'accept-btn':'slds-hide'}"  variant="brand" type="submit" name="{!task.Id}" label="Renew" onclick="{!c.renewRequest}"/>
                                <lightning:button class="{!(task.Type == 'Payment Reminder')?'accept-btn':'slds-hide'}"  variant="brand" type="submit" name="{!task.Id}" label="Pay Now" onclick="{!c.payFees}"/>
                                
                                
                            </lightning:layoutItem>
                        </lightning:layout>              	
                        
                        
                    </div>
                </aura:if>
                
                <!-- <aura:if isTrue="{!task.type == 'Validate Trainee Experience'}">
      <div class="slds-box">
             <div class="task-header">{!task.type}</div>
                <hr></hr>
                <div class="task-body">
                  <div class="slds-grid slds-p-around_small slds-wrap">
                         <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Trainee Name</div>
                             <div class="slds-form-element__control">:{!item.MUSW__Applicant__r.Name}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Profession</div>
                             <div class="slds-form-element__control">:{!item.Original_Issue_Date__c}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                             
                         </div>
                         <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">License Type</div>
                             <div class="slds-form-element__control">:{!item.Sub_Status__c}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Branch</div>
                             <div class="slds-form-element__control">:{!item.MUSW__Applicant__r.Birth_City__c}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                             
                         </div>
                         <div class="slds-col slds-size_1-of-3 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Branch</div>
                             <div class="slds-form-element__control">:{!item.MUSW__Applicant__r.Birth_City__c}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Address</div>
                             <div class="slds-form-element__control"></div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <lightning:button class="color-black" variant="neutral" type="submit" name="decline" label="Decline" onclick="{!c.declineRequest}"/>
                             <lightning:button class="color-black" variant="brand" type="submit" name="accept" label="Accept" onclick="{!c.acceptRequest}"/>
                         </div>
                    </div>                	
                </div>
            </div>
     </aura:if>
        <aura:if isTrue="{!task.type == 'Renew a Professional License'}">
      <div class="slds-box">
             <div class="task-header">{!task.type}</div>
                <hr></hr>
                <div class="task-body">
                  <div class="slds-grid slds-p-around_small slds-wrap">
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Profession</div>
                             <div class="slds-form-element__control">:{!item.MUSW__Applicant__r.Name}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">License Type</div>
                             <div class="slds-form-element__control">:{!item.Original_Issue_Date__c}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             
                         </div>                         
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <lightning:button class="color-black" variant="brand" type="submit" name="proceed" label="Renew" onclick="{!c.renewRequest}"/>
                         </div>
                    </div>                	
                </div>
            </div>
     </aura:if>      
        <aura:if isTrue="{!task.type == 'Pay Fees for Business License Application'}">
      <div class="slds-box">
             <div class="task-header">{!task.type}</div>
                <hr></hr>
                <div class="task-body">
                  <div class="slds-grid slds-p-around_small slds-wrap">
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Application Number</div>
                             <div class="slds-form-element__control">:{!item.MUSW__Applicant__r.Name}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Profession</div>
                             <div class="slds-form-element__control">:{!item.Original_Issue_Date__c}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">License Type</div>
                             <div class="slds-form-element__control">:{!item.Original_Issue_Date__c}</div>
                         </div>                         
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <lightning:button class="color-black" variant="brand" type="submit" name="pay fees" label="pay fees" onclick="{!c.payFees}"/>
                         </div>
                    </div>                	
                </div>
            </div>
     </aura:if>
        <aura:if isTrue="{!task.type == 'Provide Additional Information for License Application'}">
      <div class="slds-box">
             <div class="task-header">{!task.type}</div>
                <hr></hr>
                <div class="task-body">
                  <div class="slds-grid slds-p-around_small slds-wrap">
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Application Number</div>
                             <div class="slds-form-element__control">:{!item.MUSW__Applicant__r.Name}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Profession</div>
                             <div class="slds-form-element__control">:{!item.Original_Issue_Date__c}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">License Type</div>
                             <div class="slds-form-element__control">:{!item.Original_Issue_Date__c}</div>
                         </div>                         
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <lightning:button class="color-black" variant="brand" type="submit" name="update" label="Update" onclick="{!c.updateRequest}"/>
                         </div>
                    </div>                	
                </div>
            </div>
     </aura:if>  
        <aura:if isTrue="{!task.type == 'Replace a Designated Person'}">
      <div class="slds-box">
             <div class="task-header">{!task.type}</div>
                <hr></hr>
                <div class="task-body">
                  <div class="slds-grid slds-p-around_small slds-wrap">
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Business Name</div>
                             <div class="slds-form-element__control">:{!item.MUSW__Applicant__r.Name}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Profession</div>
                             <div class="slds-form-element__control">:{!item.Original_Issue_Date__c}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">License Type</div>
                             <div class="slds-form-element__control">:{!item.Sub_Status__c}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Branch</div>
                             <div class="slds-form-element__control">:{!item.MUSW__Applicant__r.Birth_City__c}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Phone</div>
                             <div class="slds-form-element__control">:{!item.MUSW__Issue_Date__c}</div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <div class="slds-form-element__label text-style">Address</div>
                             <div class="slds-form-element__control"></div>
                         </div>
                         <div class="slds-col slds-size_1-of-4 slds-form-element_horizontal slds-form-element">
                             <lightning:button class="color-black" variant="brand" type="submit" name="proceed" label="Proceed" onclick="{!c.proceedRequest}"/>
                         </div>
                    </div>                	
                </div>
            </div>
     </aura:if>-->
                <aura:if isTrue="{!task.Type == 'License Relationship' }"> <!-- License  Relationship-->
                    <div class="task-wrapper">
                        <div class="task-subject">
                            Invitation to get asociated to a Business License
                        </div>
                        <lightning:layout class="license-outer-wrapper slds-wrap">
                            <lightning:layoutItem size="12" mediumDeviceSize="3" class="license-item">
                                <div class="license-title other-lic">
                                    Your License
                                </div> 
                                <div class="field-style">
                                    <span class="label-style">Name: </span>
                                    <span class="data-style">{!task.Child_Licensee_Name__c}</span>
                                </div>
                                <div class="field-style">
                                    <span class="label-style">Profession: </span>
                                    <span class="data-style">{!task.Child_Profession__c}</span>
                                </div>
                                <div class="field-style">
                                    <span class="label-style">License Type: </span>
                                    <span class="data-style">{!task.Child_License_Type__c}</span>
                                </div>
                                <div class="field-style">
                                    <span class="label-style">License Number: </span>
                                    <span class="data-style">{!task.Child_License_Name__c}</span>
                                </div>
                            </lightning:layoutItem>                        
                            <lightning:layoutItem size="12" mediumDeviceSize="3" class="license-item">
                                <div class="license-title other-lic">
                                    Invited By
                                </div> 
                                <div class="field-style">
                                    <span class="label-style">Name: </span>
                                    <span class="data-style">{!task.Parent_Licensee_Name__c}</span>
                                </div>
                                <div class="field-style">
                                    <span class="label-style">Profession: </span>
                                    <span class="data-style">{!task.Parent_Profession__c}</span>
                                </div>
                                <div class="field-style">
                                    <span class="label-style">License Type: </span>
                                    <span class="data-style">{!task.Parent_License_Type__c}</span>
                                </div>
                                <div class="field-style">
                                    <span class="label-style">License Number: </span>
                                    <span class="data-style">{!task.Parent_License_Name__c}</span>
                                </div>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="12" mediumDeviceSize="3" class="license-item">
                                <div class="license-title designation">
                                    Designation
                                </div>
                                <div class="data-style">
                                    {!task.Designation__c}
                                </div>
                            </lightning:layoutItem>
                        </lightning:layout>
                        <div class="button-wrapper license-btn">                                    
                            <lightning:button class="decline-btn"  variant="neutral" type="submit" name="{!task.Id}" label="Decline" onclick="{!c.declineRequest}"/>
                            <div data-licenseType="{!task.Parent_License_Type__c}" data-id="{!task.Id}" onclick="{!c.acceptLicenseRequest}" >
                                <lightning:button class="accept-btn"  variant="brand"   label="Accept"/>
                            </div>
                        </div>
                    </div>
                </aura:if>
                <aura:if isTrue="{!task.Type == 'Other' }"> <!-- Education Task-->
                    <div class="task-wrapper">
                        <div class="task-subject">
                            Exam Expired: {!task.Subject}
                        </div>
                        <lightning:layout class="license-outer-wrapper slds-wrap">
                            <lightning:layoutItem size="12" mediumDeviceSize="3" class="license-item">
                                <div class="field-style">
                                    <span class="label-style">Email: </span>
                                    <span class="data-style">{!task.Email__c}</span>
                                </div>
                            </lightning:layoutItem>
                        </lightning:layout>
                        <div class="button-wrapper license-btn">                                    
                            <lightning:button class="decline-btn"  variant="neutral" type="submit" name="{!task.Id}" label="Decline" onclick="{!c.declineRequest}"/>
                            <!--<div  data-id="{!task.Id}" onclick="{!c.acceptLicenseRequest}" >-->
                            <lightning:button class="accept-btn"  variant="brand"   label="Reschedule Exam" value="{!task}" onclick="{!c.openModelReschedule}"/>
                            <!--</div>-->
                        </div>
                    </div>
                </aura:if>
            </aura:iteration>
        </aura:if>
        <lightning:layout class="additional-services slds-wrap">
            <lightning:layoutItem size="12" mediumDeviceSize="5" class="pro-license-wrapper services">
                <div class="ser-title">
                    Professional License
                </div>
                <div class="ser-desc">
                    Washington Department of License provides different Professional Licenses based on your requirements.
                </div>
                <div class="ser-links">
                    <ul>
                        <li><a href= "{!$Label.c.Polaris_Portal_NewDashboard}" target="_blank">View Licenses</a></li>
                        <li><a href= "{!$Label.c.Polaris_Portal_NewDashboard}" target="_blank">View Applications</a></li>
                        <li><a href= "{!$Label.c.Polaris_Portal_NewDashboard}" target="_blank">View Relationships</a></li>                        
                    </ul>
                </div>
                <div class="ser-btn-wrapper">
                    <lightning:button class="ser-btn pro-license" variant="brand" onclick="{!c.redirectLicense}" label="APPLY FOR PROFESSIONAL LICENSE" /> 
                </div>
            </lightning:layoutItem>
            <lightning:layoutItem size="12" mediumDeviceSize="5" class="business-wrapper services">
                <div class="ser-title">
                    Manage Businesses
                </div>
                <div class="ser-desc">
                    Washington Department of Licensing helps you create Business and obtain Business Licenses for it. 
                </div>
                <div class="ser-links">
                    <ul>
                        <li><a href= "{!$Label.c.Polaris_Portal_Business_Dashboard}" target="_blank">Create Business</a></li>
                        <li><a href= "{!$Label.c.Polaris_Portal_Business_Dashboard}" target="_blank">View Businesses</a></li>
                        <li><a href= "{!$Label.c.Polaris_Portal_Business_Dashboard}" target="_blank">Become a Course/Exam Provider</a></li>    
                        <li><a href= "{!$Label.c.Polaris_Portal_Business_Dashboard}" target="_blank">Understand how to manage Businesses</a></li>    
                    </ul>
                </div>
                <div class="ser-btn-wrapper">
                    <lightning:button class="ser-btn pro-license" variant="brand" onclick="{!c.redirectBusiness}" label="ADD BUSINESS" /> 
                </div>
            </lightning:layoutItem>
        </lightning:layout>
    </div>
    <!-- Pop up start -->
    <aura:if isTrue="{!v.isOpen}">             
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <!-- pop up header-->
                <header class="slds-modal__header">
                    <lightning:buttonIcon iconName="utility:close"
                                          onclick="{! c.closeModel }"
                                          alternativeText="close"
                                          variant="bare-inverse"
                                          class="slds-modal__close"/>
                    <h2>{!v.popupHeader}</h2>
                </header>
                <!-- pop up body -->
                <div class="slds-modal__content slds-p-around_medium">
                    <p>{!v.popupBody}</p>
                </div>
                <!-- pop up footer -->
                <footer class="slds-modal__footer">
                    <lightning:button variant="neutral" 
                                      label="OK"
                                      title="Cancel"
                                      onclick="{! c.closeModel }"/>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </aura:if>
    <!-- pop up end -->
    
    <aura:if isTrue="{!v.isOpenExam}">
        
        <!--###### MODAL BOX Start######--> 
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <!-- ###### MODAL BOX HEADER Start ######-->
                <header class="slds-modal__header">
                    <lightning:buttonIcon iconName="utility:close"
                                          onclick="{! c.closeModelExamReschedule }"
                                          alternativeText="close"
                                          variant="bare-inverse"
                                          class="slds-modal__close"/>
                </header>
                <!--###### MODAL BOX BODY Part Start######-->
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                    <lightning:recordEditForm aura:id ="recordEditForm" 
                                              onsubmit="{!c.handleSubmitExamReschedule}"
                                              onsuccess="{!c.handleSuccessExamReschedule}"
                                              objectApiName="Request__c"
                                              >
                        <lightning:messages />
                        <lightning:inputField fieldName="License__c" value= "{!v.taskRecordForModel.Child_License_Name__c}" disabled = "true"/>
                        <lightning:inputField fieldName="Profession__c" value ="{!v.taskRecordForModel.Child_Profession__c}" disabled = "true"/>
                        <lightning:inputField fieldName="License_Type__c" value = "{!v.taskRecordForModel.Child_License_Type__c}" disabled = "true"/>
                        <lightning:inputField fieldName="Service_Request_Type__c" value = "Reschedule Exam" disabled ="true"/>
                        <lightning:inputField fieldName="Description__c" />
                        <lightning:inputField fieldName="Status__c" value ="Under Review" class="slds-hide"/>
                        <div class="slds-m-top_medium">
                            <lightning:button variant="brand" type="submit" name="save" label="Save" />
                        </div>
                    </lightning:recordEditForm>
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
        <!--###### MODAL BOX Part END Here ######-->
        
    </aura:if>
    
</aura:component>