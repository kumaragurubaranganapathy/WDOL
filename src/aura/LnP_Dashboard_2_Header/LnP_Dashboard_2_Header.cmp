<aura:component implements="forceCommunity:availableForAllPageTypes" access="global" Controller="LnP_Dashboard_2_Header_ApexController">
    
    <aura:attribute name ="UserName" type="String"/>
    <aura:attribute name ="ContactObj" type="Contact"/>
    <aura:attribute name = "ParcelObj" type ="MUSW__Parcel__c[]"/>
    <aura:attribute name ="portalURL" type ="String" default = "{!$Label.c.Polaris_Portal_Home}"/>
    <aura:attribute name="showAddress" type="Boolean" default="false" />
    <aura:attribute name="showMoreAMR" type="Boolean" default="false" />
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <div class="header-outer-wrapper">
        <!--<lightning:layout class="header-wrapper slds-wrap">
            <lightning:layoutItem size="12" mediumDeviceSize="12" class="">
                <div class="welcome-banner">Welcome to the dashboard, find your professional license related information here.</div>
                <div class="welcome-text slds-hide">

                </div>
            </lightning:layoutItem>
            <lightning:layoutItem size="12" mediumDeviceSize="3"  class="">
                <lightning:button variant="brand" label="Apply For New License" onclick="{! c.handleClick }" />
            </lightning:layoutItem
        </lightning:layout> -->
        
        <!--<div class="actions-wrapper slds-hide_medium">        	 
                                                    
                                                   <lightning:buttonMenu iconName="utility:down" label="Actions"  onselect="{!c.handleMenuSelectlink}">
                                                        
                                                            <lightning:menuItem label="Payment cart" value="Payment cart"/>
                                                        	<lightning:menuItem label="Apply for new license" value="licenseSelectionPage"/>
                                                        	<lightning:menuItem label="Change legal name" value="Change legal name"/>
                                                        
                                                    </lightning:buttonMenu>
                                                    
                                               
        </div> -->
        <div class="actions-wrapper slds-hide_medium">                        
                        <a class="action-link" href="javascript:void(0)" onclick="{!c.showMore}">{!v.showMoreAMR?'Hide actions':'Actions'}</a>
                    </div>
        <lightning:layout class="slds-wrap intro-wrapper">
            <lightning:layoutItem size="12" mediumDeviceSize="9" class="user-info-wrapper">
                <div class="contact-name">{!v.ContactObj.Name}</div>  
                <lightning:layout class="slds-wrap contact-details">
                    <lightning:layoutItem size="12" mediumDeviceSize="4" class="contact-item">
                        <div class="field-style">
                            <div class="label-style">Email:</div>
                            <div class="data-style">{!v.ContactObj.Email?v.ContactObj.Email:'None'}</div>
                        </div>
                        <div class="field-style alt-email">
                            <div class="label-style">Alternate email:</div>
                            <div class="data-style">{!v.ContactObj.Other_Email__c?v.ContactObj.Other_Email__c:'None'}</div>
                        </div>                        
                        <div class="field-style">
                            <div class="label-style">Phone:</div>
                            <div class="data-style">{!v.ContactObj.MobilePhone?v.ContactObj.MobilePhone:'None'}</div>
                        </div>                        
                    </lightning:layoutItem>
                    <lightning:layoutItem size="12" class="contact-item address-item slds-hide_medium"> 
                        <div class="mob-address">
                            <a class="show-address label-style" onclick="{!c.showAddress}" href="javascript:void(0)">{!v.showAddress?'Hide Addresses':'Show Addresses'}</a>
                        </div>
                    </lightning:layoutItem>
                    <aura:if isTrue="{!not(empty(v.ParcelObj))}">
                    <aura:iteration items="{!v.ParcelObj}" var="parcel" indexVar = "index">
                        
                        <aura:if isTrue = "{!parcel.Address_Type__c == 'HOME'}">
                            <lightning:layoutItem size="12" mediumDeviceSize="4" class="{!v.showAddress?'contact-item':'contact-item slds-show_medium'}">
                                <div class="field-style address">
                                    <div class="label-style">Physical address:</div>
                                    <div class="data-style">{!parcel.MUSW__Street__c}, {!parcel.MUSW__City__c}, {!parcel.MUSW__State__c} - {!parcel.MUSW__Post_Zip_Code__c}</div>
                                </div>
                            </lightning:layoutItem>
                            <!--<div class="">{!parcel.MUSW__Street__c},</div>
                        <div class="">{!parcel.MUSW__City__c},</div>
                        <div class="">{!parcel.MUSW__State__c} - {!parcel.MUSW__Post_Zip_Code__c}</div> -->
                        </aura:if>
                        <aura:if isTrue = "{!parcel.Address_Type__c == 'MAILING ADDRESS'}">
                            <lightning:layoutItem size="12" mediumDeviceSize="4" class="{!v.showAddress?'contact-item':'contact-item slds-show_medium'}">
                                <div class="field-style address">
                                    <div class="label-style">Mailing address:</div>
                                    <div class="data-style">{!parcel.MUSW__Street__c}, {!parcel.MUSW__City__c}, {!parcel.MUSW__State__c} - {!parcel.MUSW__Post_Zip_Code__c}</div>
                                </div>
                            </lightning:layoutItem>
                            <!--<div class="">{!parcel.MUSW__Street__c},</div>
                        <div class="">{!parcel.MUSW__City__c},</div>
                        <div class="">{!parcel.MUSW__State__c} - {!parcel.MUSW__Post_Zip_Code__c}</div>  -->  
                        </aura:if>
                        
                    </aura:iteration>
                        <aura:set attribute="else">
                        	<lightning:layoutItem size="12" mediumDeviceSize="4" class="{!v.showAddress?'contact-item':'contact-item slds-show_medium'}">
                                <div class="field-style address">
                                    <div class="label-style">Mailing address:</div>
                                    <div class="data-style">None</div>
                                </div>
                            </lightning:layoutItem>
                            <lightning:layoutItem size="12" mediumDeviceSize="4" class="{!v.showAddress?'contact-item':'contact-item slds-show_medium'}">
                                <div class="field-style address">
                                    <div class="label-style">Physical address:</div>
                                    <div class="data-style">None</div>
                                </div>
                            </lightning:layoutItem>
                        </aura:set>
                    </aura:if>
                    
                </lightning:layout>
                <lightning:layout class="action-links slds-wrap"> 
                    <lightning:layoutItem size="12" mediumDeviceSize="4" class="change-link-wrapper">
                        <a href="javascript:void(0);" class="change-link" onclick="{!c.updateContactInfo}">Update contact information</a>
                    </lightning:layoutItem>
                    <lightning:layoutItem size="12" mediumDeviceSize="4" class="change-link-wrapper">
                        <a href="javascript:void(0);" class="change-link" onclick="{!c.updateAddress}">Change address</a>
                    </lightning:layoutItem>                    
                </lightning:layout>
            </lightning:layoutItem>
            <lightning:layoutItem size="12" mediumDeviceSize="3" class="{!v.showMoreAMR?'nav-links exp-links':'nav-links slds-show_medium'}">
                <ul class="{!v.showMoreAMR?'exp-links-inner':''}">
                    <li aura:id="action-item"><a onclick="{!c.goToCart}" href="javascript:void(0);" target="_self" >Payment cart</a></li>
                    <li aura:id="action-item"><a onclick="{!c.handleClick}" href="javascript:void(0);">Apply for new license</a></li>
                    <li aura:id="action-item"><a onclick="{!c.updateLegalName}" href="javascript:void(0);">Change Legal Name</a></li>
                    
                    <!--<li aura:id="action-item"><a onclick="{!c.handleClick }" href="javascript:void(0);">Apply For New License</a></li>
                    <li aura:id="action-item"><a href="javascript:void(0);" onclick="{!c.updateContactInfo}">Update Contact Information</a></li>
                    <li aura:id="action-item"><a onclick="{!c.handleClick }" href="javascript:void(0);">Apply For New License</a></li>
                    <li aura:id="action-item"><a href="javascript:void(0);" onclick="{!c.updateContactInfo}">Update Contact Information</a></li>
                    <li aura:id="action-item"><a onclick="{!c.handleClick }" href="javascript:void(0);">Apply For New License</a></li>
                    <li aura:id="action-item"><a href="javascript:void(0);" onclick="{!c.updateContactInfo}">Update Contact Information</a></li>-->
                    <!--li><a href="javascript:void(0);" onclick="{!c.updateAddress}">Update Address</a></li>
                    <li><a href="javascript:void(0);">Create New Business</a></li>
                    <li><a href="javascript:void(0);">Edit phone number</a></li>
                    <li><a href="javascript:void(0);">Request Name Change</a></li>
                    <li><a href="javascript:void(0);">Request Address Change</a></li-->
                </ul>
            </lightning:layoutItem>
        </lightning:layout>
    </div>
</aura:component>