<!--**
* User Story: 
* Name: ApplicationSelection
* Type: Visual Force Page
* Description: Application Selection home page
* Date:        Developer/Company                    Description
* ---------------------------------------------------------------------------------------------------------------------------------------- *
* 07/16/2018   Sharad Maheshwari/Deloitte           Initial Creation
**-->
<apex:page controller="ApplicationSelection_CC" label="Application Selection" docType="html-5.0"
           showHeader="false" sidebar="false" standardStylesheets="false" applyHtmlTag="false">
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" lang='en'>
        <head>  
            <meta charset="UTF-8"/>
            <meta name="viewport" content="width=device-width, initial-scale=1"/>    
            <link rel="shortcut icon" href="{!URLFOR($Resource.favicon)}" type="image/x-icon" />
            <title>Application Selection</title>  
            <apex:includeScript value="{!$Resource.JS_QuestionsComp}" />
            <c:Resources />  
            <script type="text/javascript">
            $(document).ready(function() {
                $(".notification").html('');
                $('.notification').append('<p>Loading completed</p>');
                $("a.tip").tooltip();
            });
            </script>
        </head>
        
        <c:Header />   <!-- Page header -->        
        
        <main class='container pageSection'> 
            <div role="alert" aria-atomic="true" class="notification"></div>
            <apex:form styleClass="animatedform" id="appSelection">
                
                <!-- Get server errors -->
                <apex:outputPanel id="apexMsgs">
                    <apex:messages id="apexMessages" style="display: none;" />
                    <script type="text/javascript">
                    var errorMessages = '';
                    errorMessages = $("[id$='apexMessages'] li").text();
                    if(errorMessages != '') {
                        var errMsg = '<div class="textCenter"><span>' + errorMessages + '<span></div>';                        
                        MODAL_UTILITY.errorMessageModal(errMsg);
                    }
                    </script>
                </apex:outputPanel>
                <!-- Get server errors -->
                
                <apex:actionFunction name="setAccountId" oncomplete="return false;">
                    <apex:param name="accountId" assignTo="{!accountId}" value=""/>
                </apex:actionFunction>
                <section >
                    <section class="row">
                        <div class="col-sm-4 col-md-4">                            
                            <h2>Application Selection</h2><!-- Component heading -->                            
                            <!-- Component description -->
                            <p>Select the Program Type. Next, based on the Program type, select the License Type, Credential and Application Method, as applicable.</p>
                            <p>To add an account, select the account name from the drop down. If you do not see an account, please add the business via the <a href="/mybusiness">Manage Business</a> page. Application Instruction to be picked from Instructions tab.</p>                     
                        </div>
                        <div class="col-sm-8 col-md-8">
                            <!-- Display list of records -->
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">                                        
                                        <apex:outputLabel value="Select Program Type" for="selAppTypeCredentials"/>
                                        <apex:inputField value="{!lic.Application_Type__c}" styleClass="form-control"  id="selAppTypeCredentials" onChange="selApplicationType();"/>
                                        <span></span>
                                    </div>
                                    <div class="form-group" style="display: none;">
                                        <apex:outputLabel value="Select License Type" for="selCredentialType"/>
                                        <apex:inputField value="{!lic.Credential_Type__c}" styleClass="form-control" id="selCredentialType"/>
                                    </div>
                                    <div class="form-group" style="display: none;">
                                        <apex:outputLabel value="Select Credential" for="selCredential"/>
                                        <apex:inputField value="{!lic.Credential__c}" styleClass="form-control" id="selCredential"/>
                                        <input type="hidden" id="selCredTemp" value="" />
                                    </div>
                                    <div class="form-group" style="display: none;">
                                        <apex:outputLabel value="Select Application Method" for="selAppicationMethod"/>
                                        <apex:inputField value="{!lic.Application_Method__c}" styleClass="form-control" id="selAppicationMethod" onchange="NOTIFICATIONS.spinnerStart();addInstructions();"/>   
                                    </div> 
                                    
                                    
                                    <div class="form-group" style="display: none;">                                        
                                        <apex:outputLabel value="Select Application Type" for="selAppTypePermits"/>
                                        <apex:inputField value="{!permit.Application_Type__c}" styleClass="form-control"  id="selAppTypePermits" onchange="selApplicationType();"/>
                                        <span></span>
                                    </div>
                                    <div class="form-group" style="display: none;">
                                        <apex:outputLabel value="Select Program Area" for="selProgramArea"/>
                                        <apex:inputField value="{!permit.Program_Area__c}" styleClass="form-control" id="selProgramArea"/>
                                    </div>
                                    
                                    <div class="form-group" style="display: none;">
                                        <apex:outputLabel value="Select Permit Type" for="selPermitType"/>
                                        <apex:inputField value="{!permit.Permit_Type__c}" styleClass="form-control" id="selPermitType" onchange="NOTIFICATIONS.spinnerStart();addInstructions();"/>
                                    </div>
                                    <div class="form-group applyForList" style="display: none;">
                                        <label for="applyForList">Apply for License/Exam: </label>
                                        <span class=""></span>
                                        <select class="selectPicker" id="applyForList">
                                            <option value=""></option>
                                            <option value="License">License</option>
                                            <option value="Exam">Exam</option>
                                        </select>
                                    </div>
                                    
                                    <!--apex:outputPanel id="businessPanelOuter" layout="block"-->
                                    <apex:outputPanel id="businessPanel" layout="block" style="display: none;">
                                        <div class="form-group accountList" >
                                            <label for="accountList" id="collegeNameLabel">Please select an Account</label>
                                            <span class=""></span>
                                            <select class="selectPicker" id="accountList">
                                                <option value=""></option>
                                                <!-- Append options here -->
                                            </select>
                                            <br/>
                                            <!--apex:commandLink action="{!flagupdate}" style="color: #337ab7;" value="Click here to add a new business" id="theCommandLink" /-->
                                        </div>
                                    </apex:outputPanel>
                                    <!--/apex:outputPanel-->                                     
                                </div>
                            </div>            
                            <!-- Display list of records -->    
                        </div>
                    </section>
                    
                    <!--apex:outputPanel id="businesscomp" rendered="{!isflagchecked}">

<c:AddBusinesstoLicenseSelection />    

</apex:outputPanel-->
                    
                    <section class="row showHideEligibility" style="display: none;">
                        <div class="col-sm-4 col-md-4">
                            <!-- Component heading -->
                            <h2>Eligibility</h2>
                            <!-- Component heading -->
                            <!-- Component description -->
                            <p>By answering the following questions, eligibility for the license application will be determined. Confirmation will be noted if eligibility is met.</p>
                            <!-- Component description -->
                        </div>
                        <div class="col-sm-8 col-md-8">
                            <apex:outputPanel id="questionsDisplay" layout="block">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <apex:repeat value="{!queList}" var="queObj">
                                            <div class="form-group quesItems">
                                                <fieldset>
                                                    <legend><apex:outputText value="{!queObj.Question_Body__c}" escape="false"></apex:outputText></legend>
                                                    <input type="radio" class="questionRadio" id="qRadioY{!queObj.Id}{!queObj.Qualifying_Response__c}" name="{!queObj.Id}Radio" value="Yes" />
                                                    <label for="qRadioY{!queObj.Id}{!queObj.Qualifying_Response__c}">Yes&nbsp;&nbsp;&nbsp;&nbsp;</label>
                                                    <input type="radio" class="questionRadio" id="qRadioN{!queObj.Id}{!queObj.Qualifying_Response__c}" name="{!queObj.Id}Radio" value="No" />
                                                    <label for="qRadioN{!queObj.Id}{!queObj.Qualifying_Response__c}">No</label> 
                                                </fieldset> 
                                                <!--    <apex:outputpanel rendered="{!queObj.Data_Type__c ='Single Select Radio'}">-->
                                                
                                                <!--  </apex:outputpanel>-->
                                                <!--  <fieldset> 
<apex:outputpanel rendered="{!queObj.Data_Type__c ='Text'}">
<div id="inputBlock">
<legend><apex:outputText value="{!queObj.Question_Body__c}" escape="false"></apex:outputText></legend>
<label for="textA{!queObj.Id}{!queObj.Qualifying_Response__c}"></label>
<input type="text" id="textA{!queObj.Id}{!queObj.Qualifying_Response__c}" /></div>
</apex:outputpanel>
</fieldset> -->
                                                <!--  <apex:outputpanel rendered="{!queObj.Data_Type__c ='Multi Select Checkbox'}">
<div id="inputBlock">
<!-- <label for="checkB{!queObj.Id}{!queObj.Qualifying_Response__c}">Check one</label>
<apex:inputCheckbox  value="{!queObj.Qualifying_Response__c}"/></div>
</apex:outputpanel>-->
                                                
                                            </div>
                                        </apex:repeat>
                                    </div>
                                </div>  
                                <div id="jsonQ" style="display: none;">
                                    <apex:outputText value="{!questionsJson}"/>
                                </div> 
                            <!--    <div id="countLic" style="display: none;">
                                    <apex:outputText value="{!licenseJson}"/>
                                </div> -->
                                <div id="jsonA" style="display: none;">
                                    <apex:outputText id="accountListLoad" value="{!accountsSerialized}"/>
                                </div>
                                <script>
                                $(function(){
                                    // Load events for the marup
                                    try{
                                        QUESTIONSCOMPNS.loadEvents();
                                    }
                                    catch(e){}
                                });
                                </script>
                                <script type="text/javascript">
                                var accountType = '{!accountType}';
                                //currentObjList = [];
                                var questionsList = $("#jsonQ").text();
                                var licenseList = $("#countLic").text();
                                if((questionsList != '') && (questionsList != null)) {
                                    try {
                                        questionsList = JSON.parse(questionsList);
                                        
                                        $.each(questionsList, function(i, val) {
                                            var currentObj = {};
                                            currentObj.Id = val.Id;
                                            currentObj.Answer = '';
                                            currentObj.QualifyingAnswer = val.Qualifying_Response__c;
                                            //alert("currentobj at 175:"+currentObj.QualifyingAnswer);
                                            currentObjList.push(currentObj);
                                        });
                                    }
                                    catch(e) {
                                        console.debug('Error parsing questions');
                                    }
                                }
                                if((licenseList != '') && (licenseList != null)) {
                                    try {
                                        licenseList = JSON.parse(licenseList );
                                        $.each(licenseList , function(i, val) {
                                            var currentObj = {};
                                            currentObj.Id = val.Id;
                                            
                                            licenseObjList .push(currentObj);
                                        });
                                        
                                        
                                    }
                                    catch(e) {
                                        console.debug('Error parsing questions');
                                    }
                                }
                                //TodomyBu
                                var accountsList = $("#jsonA").text();
                                accountsList = JSON.parse(accountsList);
                                
                                </script>
                            </apex:outputPanel>         
                            
                        </div>
                    </section>
                    
                    <section class="row showHideInstructions" style="display: none;">
                        <div class="col-sm-4 col-md-4">
                            <!-- Component heading -->
                            <h2>Application Instructions</h2>
                            <!-- Component heading -->
                            <!-- Component description -->
                            <!--   <p>To apply for License, send <b>this completed form</b>, the <b>non-refundable application fee</b> in a check or money order payable to the Department of Licensing, and a <b>copy of all required documents </b>to:</p>
<p><b>Department of Licensing<br/>
PO Box 35001<br/>
Seattle WA 98124-3401</b></p>
<!-- Component description -->
                            <div class="row">
                                <p>
                                    <apex:outputPanel id="instDisplay2" layout="block" styleClass="form-group">
                                        <apex:outputText value="{!news.Instructions__c}" escape="false" />
                                    </apex:outputPanel></p>
                            </div>   
                        </div>
                        <div class="col-sm-8 col-md-8">
                            
                            <div class="row">
                                <div class="col-sm-10">
                                    <apex:outputPanel id="instDisplay" layout="block" styleClass="form-group">
                                        <apex:outputPanel layout="block" styleClass="row" rendered="{!documentId != ''}">
                                            <p><apex:outputText escape="false" value="{!news.Answer__c}" /></p>
                                            <apex:outputLink value="/servlet/servlet.FileDownload?file={!documentId}" style="text-decoration: underline" target="_blank">Click here</apex:outputLink><br/><br/>
                                        </apex:outputPanel>
                                        <!-- <apex:outputText value="{!news.Instructions__c}" escape="false" /> -->
                                    </apex:outputPanel>
                                </div>
                                
                            </div>   
                        </div>
                    </section>
                    <section class="row">
                        <div class="col-sm-4 col-md-4">
                            <p>&nbsp;</p>
                        </div>
                        <div class="col-sm-8 col-md-8">
                            <!-- Display list of records -->
                            <div class="row">
                                <input type="button" class="btn btn-tertiary" value="Cancel" id="cancelbusinessLink"/>
                                <input class="btn btn-tertiary" id="cancelButton" type="button" value="Cancel"/>
                                <input type="button" class="btn btn-primary btn-space" value="Save and Continue" id="saveAndContinueButton"/>
                            </div>            
                            <!-- Display list of records -->    
                        </div>
                        
                    </section>
                </section>
                
                <!--apex:actionFunction name="addInstructions" action="{!getEligibilityQuestions}" reRender="apexMsgs,instDisplay,questionsDisplay,accountList" oncomplete="showQuestions();loadEvents();NOTIFICATIONS.spinnerStop();"/-->
                <apex:actionFunction name="addInstructions" action="{!getEligibilityQuestions}" reRender="instDisplay,instDisplay2,questionsDisplay,accountList" oncomplete="showQuestions();NOTIFICATIONS.spinnerStop();"/>
                <apex:actionFunction name="proceedToApplication" action="{!saveAndContinue}" reRender="apexMsgs">
                    <apex:param assignTo="{!applyFor}" name="applyFor" value=""/>
                </apex:actionFunction>
            </apex:form>
            
        </main>
        <c:Footer /><!-- Page footer -->
        <script type="text/javascript">
        
        // Global variables
        var currentObjList = [];
        var licenseObjList = [];
        //var questionsList = ''; 
        var currAccountId = '';
        var flagcheck = {!isflagchecked};
        
        // On page load
        $(function() {
            //loadEvents();
            window.onbeforeunload = function() {
                $("[id$='appSelection']")[0].reset();
            }
            questionsList = $("#jsonQ").text();
            licenseList = $("#countLic").text();
            if((questionsList != '') && (questionsList != null)) {
                try {
                    questionsList = JSON.parse(questionsList);
                    //  alert('the value of questionsList' +questionsList) ;
                    
                    $.each(questionsList, function(i, val) {
                        var currentObj = {};
                        currentObj.Id = val.Id;
                        currentObj.Answer = '';
                        currentObj.QualifyingAnswer = val.Qualifying_Response__c;
                        //alert("currentobj at 175:"+currentObj.QualifyingAnswer);
                        currentObjList.push(currentObj);
                    });
                }
                catch(e) {
                    console.debug('Error parsing questions');
                }
            }
            //alert('licenseList1: '+licenseList);
            if((licenseList != '') && (licenseList != null)) {
                try {
                    licenseList = JSON.parse(licenseList );
                    $.each(licenseList , function(i, val) {
                        var currentObj = {};
                        currentObj.Id = val.Id;
                        
                        licenseObjList .push(currentObj);
                    });
                    
                    
                }
                catch(e) {
                    console.debug('Error parsing questions');
                }
            }
            var readOnlyFields = function(){
                setTimeout(function(){
                    $(".form-control:disabled").removeAttr("disabled").attr("readonly","readonly").find('option:gt(0)').attr('disabled','disabled');
                }, 200);
            };
            readOnlyFields();
            $(document).on('change', '.form-control', function () {
                readOnlyFields();
            });
            
            $('#cancelbusinessLink').hide(); 
            
            
            $("#applyForList").on("change", function() {
                if($("#applyForList").val() == 'License') {
                    $(".applyForLicense").slideDown("slow", function() {});
                }
                else {
                    $(".applyForLicense").slideUp("slow", function() {});
                    $(".showHideEligibility").slideUp("slow", function() {});
                }
            });
            
            
            if(flagcheck == true  ){
                
                $('#cancelbusinessLink').show(); 
                $("#saveAndContinueButton").hide();
                $('#cancelButton').hide();
                $(".applyForLicense").show();
                $(".accountList").show();
                loadAccountsPicklist();
                
            }
            
            //on clicking cancel
            $("#cancelbusinessLink").on ("click",function(){
                $(".showHideEligibility").show();
                $("[id$='theCommandLink']").show();
                $("#cancelbusinessLink").hide();
                $("#cancelButton").show();
                $("#saveAndContinueButton").show();
                $("[id$='businesscomp']").hide();
                $(".showHideInstructions").show();
            });
            
            //on adding new business
            $('#newsubmit').on("click",function(){
                
                //var temp = $('#businessflag').val();
                //alert(temp);
                
                var isError = $('#childhidden').val();
                if(isError =="error"){
                    return false;
                }
                else{
                    //addInstructions();
                    $(".showHideInstructions").show();
                    $("[id$='businesscomp']").hide();
                    $("#cancelbusinessLink").hide();
                    $("#cancelButton").show();
                    $("#saveAndContinueButton").show();
                }
            });
            
            // Save and continue
            $("#saveAndContinueButton").on("click", function() {
                if(($("[id$='selAppicationMethod']").val() == '') || ($("[id$='selAppTypePermits']").is(':visible') && $("[id$='selPermitType']").val() == '')) {
                    MODAL_UTILITY.errorMessageModal('<div class="textCenter"><span>Please provide all requested data.<span></div>');
                } 
                else if($("[id$='businessPanel']").is(':visible') && $("#accountList").val() == '') { 
                    MODAL_UTILITY.errorMessageModal('<div class="textCenter"><span>Please provide Business Account. If you do not see an available account, add an account by navigating to the "Manage Business" link via the dropdown menu in the upper right corner.<span></div>');
                }else {
                    // Validate user response
                    validateAnswers();
                }
            });
            
            $("#accountList").on("change", function() {
                currAccountId = $("#accountList").val();
                setAccountId(currAccountId);
            });
            
            $("#cancelButton").on("click", function() {
                window.location.href = '/Dashboard';
            });
            
            $(".individualBusinessRadio").on("change", function() {
                if($(this).attr("id") == 'businessRadio') {
                    setApplyForBusiness(true);
                }
                else {
                    setApplyForBusiness(false);
                }
            });
            
            
            
            $('body').delegate('.questionRadio', 'click', function () {
                // Get Id from markup
                var currentId = $(this).attr("id");
                var currentOption = '';
                var requiredAnswer = '';
                
                // Get current answer
                if(currentId.indexOf('qRadioY') >= 0) {
                    currentOption = 'Yes';
                }
                else if(currentId.indexOf('qRadioN') >= 0) {
                    currentOption = 'No';
                }
                
                // Remove prefix
                currentId = currentId.substring(7, currentId.length);
                
                // Actual qualifying answer
                requiredAnswer = currentId.substring(18, currentId.length);
                
                // Actual record id
                currentId = currentId.substring(0, 18);
                
                // Initialize object
                var currentObj = {};
                
                // Add answers
                $.each(currentObjList, function(i, val) {
                    if(val.Id == currentId) {
                        val.Answer = currentOption;
                    }
                });
            });
            
            $('body').delegate('[id$="selCredentialType"],[id$="selCredential"]', 'change', function () {
                $("[id$='selAppicationMethod']").val($("[id$='selAppicationMethod'] option:first").val());
                console.log('inside here::');
                $("[id$='businessPanel']").slideUp("slow", function() {}); 
                $(".showHideInstructions, .showHideEligibility").slideUp("slow", function() {}); 
            });
            
            $('body').delegate('[id$="selAppicationMethod"]', 'change', function () {
                console.log('inside here value::1::'+ $("[id$='selAppicationMethod']").val());
                if($("[id$='selAppicationMethod']").val() == "") {
                    console.log('inside here value::2::'+ $("[id$='selAppicationMethod']").val());
                    $("[id$='businessPanel']").slideUp("slow", function() {}); 
                    $(".showHideInstructions, .showHideEligibility").slideUp("slow", function() {}); 
                }
            });
            
        });
        
        function loadAccountsPicklist() {
            $("#accountList").empty();
            var innerHtml = '<option value="">--None--</option>';
            $.each(accountsList, function(i, val) {
                innerHtml += '<option value="' + val.accountId + '" id="opt' + val.accountId + '">' + val.accountName + '</option>';
            });
            $("#accountList").append(innerHtml);
        }
        
        function showQuestions() {
            $(".showHideEligibility").slideUp("slow", function() {});
            console.log('$Label.Str_Business::'+'{!$Label.Str_Business}');
            if(accountType == '{!$Label.Str_Business}') {
                loadAccountsPicklist();
                $(".accountList").parent("div").css("display","block");
                $(".accountList").slideDown("slow", function() {});                
            } else {
                $(".accountList").parent("div").css("display","none");
                $(".accountList").slideUp("slow", function() {});  
            }
            
            if(questionsList.length > 0) {
                $(".showHideEligibility").slideDown("slow", function() {});
            }
            $(".showHideInstructions").slideDown("slow", function() {});
        }
        
        
        function validateAnswers() {
            
            // Initialize variable
            var isEligible = true;
            // var isDisplayMsg=true;
            var numberofQuest = currentObjList.length;
			var numberofTempLic = 0;            
            var num = 0;
            var errMsg='';
            //alert('licenseObjList.length:'+licenseObjList.length);
            // If not answered anything
            if(currentObjList == '' && !( ($("[id$='selCredentialType']").val()=='Temporary Certified Residential') || ($("[id$='selCredentialType']").val()=='Temporary State Licensed') || ($("[id$='selCredentialType']").val()=='Temporary Certified General' ))) {
                isEligible = true;
            }            
            else if(licenseObjList!='' && licenseObjList.length>=3 &&( ($("[id$='selCredentialType']").val()=='Temporary Certified Residential') || ($("[id$='selCredentialType']").val()=='Temporary State Licensed') || ($("[id$='selCredentialType']").val()=='Temporary Certified General' ))){
                errMsg = '<div class="textCenter"><span>You have reached the maximum allowed 3 temporary permits for this calendar year.  Please contact the Washington Dept. of Licensing Appraiser\'s program if you have any questions.<span></div>';                   
                	numberofTempLic++;
                //isEligible = false;
                } 
                if(errMsg!=''){
                    
                    MODAL_UTILITY.errorMessageModal(errMsg);
                }
            
            else {
               
                // Check answers
                $.each(currentObjList, function(i, val) {
                    if((val.Answer == '') || (val.Answer == 'undefined')) {
                        errMsg = '<div class="textCenter"><span>Please select appropriate answer for all the eligibility questions.<span></div>';
                        
                    }
                    else if((val.Answer == 'No') || (val.Answer == 'no')){
                        errMsg = '<div class="textCenter"><span>Sorry, you are ineligible for this application<span></div>';
                    }
                    
                        else{
                            //alert('inside else');
                            isEligible = true;
                            num++;
                        }
                    
                });
                if(errMsg!=''){
                    //alert('inside if2');
                    MODAL_UTILITY.errorMessageModal(errMsg);
                }
            }
            
            
            if(num == numberofQuest && numberofTempLic==0){
                //alert('inside if1');
                //var currApplyFor = $("#applyForList").val();
                proceedToApplication("License");
            }
            
        }
        //on adding existing business
        
        $('#submitExistingBusiness').on("click",function(e){
            var isError = $('#childhiddenexisting').val();
            
            if(isError =="error"){
                //alert("Error");
                return false;
            }
            else{
                //addInstructions();
                //flagreset();
                $(".showHideInstructions").show();
                $(".showHideEligibility").show();
                $("[id$='businesscomp']").hide();
                $("#cancelbusinessLink").hide();
                $("#cancelButton").show();
                $("#saveAndContinueButton").show();
            }
            
        });
        
        
        function selApplicationType() {
            $(".showHideInstructions, .showHideEligibility").slideUp("slow", function() {}); 
            if($("[id$='selAppTypeCredentials']").closest('div.form-group').css('display') == 'block') {
                if(($("[id$='selAppTypeCredentials']").val() == "Trades Credential") || ($("[id$='selAppTypeCredentials']").val() == "Manufactured Homes") || ($("[id$='selAppTypeCredentials']").val() == "Notary Public") || ($("[id$='selAppTypeCredentials']").val() == "Appraisers") || ($("[id$='selAppTypeCredentials']").val() == "Timeshares") || ($("[id$='selAppTypeCredentials']").val() == "Architects") || ($("[id$='selAppTypeCredentials']").val() == "Appraisers - Real Estate") ||($("[id$='selAppTypeCredentials']").val() == "Camping Resorts") || ($("[id$='selAppTypeCredentials']").val() == "Geologist") || ($("[id$='selAppTypeCredentials']").val() == "Delegated Municipality") ||($("[id$='selAppTypeCredentials']").val() == "Funerals") ||($("[id$='selAppTypeCredentials']").val() == "Engineers") || ($("[id$='selAppTypeCredentials']").val() == "Appraisal Management Companies") || ($("[id$='selAppTypeCredentials']").val() == "On-site Wastewater")
                   ||($("[id$='selAppTypeCredentials']").val() == "Landscape Architects")
                   ||($("[id$='selAppTypeCredentials']").val() == "Land Surveyors")
                   || ($("[id$='selAppTypeCredentials']").val() == "Cemeteries")){
                    $("[id$='selAppTypeCredentials']").closest('div.form-group').siblings().css("display","none");
                    $("[id$='selCredentialType']").closest('div.form-group').css("display","block");
                    $("[id$='selCredential']").closest('div.form-group').css("display","block");
                    $("[id$='selAppicationMethod']").closest('div.form-group').css("display","block");
                    $("[id$='selAppTypePermits']").val($("[id$='selAppTypeCredentials']").val());
                } else  {
                    $("[id$='selAppTypeCredentials']").closest('div.form-group').siblings().css("display","none");
                    $("[id$='selAppTypeCredentials']").closest('div.form-group').css("display","none");
                    $("[id$='selAppTypePermits']").closest('div.form-group').css("display","block");
                    $("[id$='selAppTypePermits']").val($("[id$='selAppTypeCredentials']").val());
                    $("[id$='selProgramArea']").closest('div.form-group').css("display","block");
                    $("[id$='selPermitType']").closest('div.form-group').css("display","block");
                    $("[id$='selAppTypePermits']").trigger('change');
                }
            } else  if($("[id$='selAppTypePermits']").closest('div.form-group').css('display') == 'block') {
                if(($("[id$='selAppTypePermits']").val() == "Trades Credential") ||($("[id$='selAppTypePermits']").val() == "Manufactured Homes") || ($("[id$='selAppTypeCredentials']").val() == "Notary Public") || ($("[id$='selAppTypeCredentials']").val() == "Appraisers - Real Estate") || ($("[id$='selAppTypeCredentials']").val() == "Appraisers") || ($("[id$='selAppTypeCredentials']").val() == "Timeshares") || ($("[id$='selAppTypeCredentials']").val() == "Architects")||($("[id$='selAppTypeCredentials']").val() == "Geologist") || ($("[id$='selAppTypeCredentials']").val() == "Camping Resorts") || ($("[id$='selAppTypePermits']").val() == "Delegated Municipality")||($("[id$='selAppTypeCredentials']").val() == "Funerals") ||($("[id$='selAppTypeCredentials']").val() == "Engineers") || ($("[id$='selAppTypeCredentials']").val() == "Appraisal Management Companies") || ($("[id$='selAppTypeCredentials']").val() == "Landscape Architects") || ($("[id$='selAppTypeCredentials']").val() == "On-site Wastewater") || ($("[id$='selAppTypeCredentials']").val() == "Land Surveyors") || ($("[id$='selAppTypeCredentials']").val() == "Cemeteries") ){
                    $("[id$='selAppTypePermits']").closest('div.form-group').siblings().css("display","none");
                    $("[id$='selAppTypeCredentials']").closest('div.form-group').css("display","block");
                    $("[id$='selAppTypeCredentials']").val($("[id$='selAppTypePermits']").val());
                    $("[id$='selCredentialType']").closest('div.form-group').css("display","block");
                    $("[id$='selCredential']").closest('div.form-group').css("display","block");
                    $("[id$='selAppicationMethod']").closest('div.form-group').css("display","block");
                    $("[id$='selAppTypeCredentials']").trigger('change');
                }
            }
        }
        
        /*function checkChangeCred(){
            $("#selCredTemp").val($("[id$='selCredential']").val());
        }
        function addInstructionCredential() {
            if($("[id$='selCredential']").val() != ""){
                if($("#selCredTemp").val() != $("[id$='selCredential']").val()){
                    var lengthCred = $("[id$='selAppicationMethod'] > option").length;
                    if(lengthCred > 0) {
                        NOTIFICATIONS.spinnerStart();
                        addInstructions();   
                        checkChangeCred();
                    }
                }
            }   
        }*/
        
        
        
        
        </script>
    </html>
</apex:page>