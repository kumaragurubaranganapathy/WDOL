<apex:page showHeader="true" sidebar="true" controller="BGCM.RecordDeepCloneController">

	<style>
		div.show-loader {
			visibility: visible;
		}
		div.hide-loader {
			visibility: hidden;
		}
	</style>
	<apex:slds />
	<apex:form id="form">
		<div class="slds-scope">
			<div id="preloader" style="margin:0;margin-top:image-height/2;margin-left:image-width/2;padding:0;position:fixed;top:0px;left:0px;width:100%;height:100%;background:#fff url('/img/loading32.gif') no-repeat center center;z-index:999;opacity:0.5;" class="{!if(showLoadingIndicator, 'show-loader', 'hide-loader')}"/>


			<div class="slds-m-around_xx-large">
				<a href="{!retUrl}" class="slds-button slds-button_neutral">Back</a>
			</div>
			<apex:pageMessages id="msg"/>
			<apex:outputPanel layout="block" rendered="{!!ISBLANK(newParentName)}" styleClass="slds-m-around_xx-large slds-text-heading_small">
				<p>The following record has been created:</p>
				<p><a href="{!'/' + newParentId}">{!newParentName}</a></p>
			</apex:outputPanel>
		</div>
		<apex:actionFunction name="startJS" action="{!startCloning}" rerender="form"/>
	</apex:form>
	<script>
		window.onload=function() {
			startJS();
		};
	</script>
</apex:page>